(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{130:function(e,t,a){e.exports=a(164)},154:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){},164:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),c=a.n(o),l=a(31),i=a(102),s=a.n(i),u=a(6),m=Object(n.createContext)(null),d=Object(n.createContext)(null),p=Object(n.createContext)(null),g=Object(n.createContext)(null),f=Object(n.createContext)(null),E=function(e){var t=Object(n.useState)(null),a=Object(u.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(!1),i=Object(u.a)(l,2),s=i[0],E=i[1],b=Object(n.useState)(null),h=Object(u.a)(b,2),v=h[0],j=h[1],O=Object(n.useState)(""),C=Object(u.a)(O,2),y=C[0],x=C[1],S=Object(n.useState)(null),w=Object(u.a)(S,2),_=w[0],k=w[1],N=Object(n.useState)(null),T=Object(u.a)(N,2),F=T[0],U=T[1],A=Object(n.useState)(!1),D=Object(u.a)(A,2),B=D[0],L=D[1];return r.a.createElement(p.Provider,{value:{type:y,setType:x}},r.a.createElement(m.Provider,{value:{userstate:o,loginStatus:s,setUserState:c,setLoginStatus:E}},r.a.createElement(d.Provider,{value:{room_id:v,setRoom_id:j,change_flag:B,setChange_flag:L}},r.a.createElement(f.Provider,{value:{bot_id:F,setBot_id:U}},r.a.createElement(g.Provider,{value:{user_id:_,setUser_id:k}},e.children)))))},b=a(103),h=a(8),v=a(9),j=a.n(v),O=a(211),C=a(222),y=a(208),x=a(209),S=a(21),w=a.n(S),_=a(84),k=a.n(_),N=a(81),T=a(198),F=a(224),U=a(201),A=a(167),D=a(202),B=a(225),L=a(203),P=a(204),R=a(220),W=a(83),q=a.n(W),I=a(53),M=a.n(I),G=a(206),H=a(114),z=a(207),K=a(82),V=a(115),Y=a(205);a(154);function Q(){var e=Object(N.a)(["\n  list-style: none;\n  border: none;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.12);\n  font-size: 14px;\n  color: #666;\n  padding: 5px 10px;\n  cursor: pointer;\n  \n"]);return Q=function(){return e},e}function J(){var e=Object(N.a)(["\n  \n  background-color: #fff;\n  border-radius: 4px;\n  box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.24);\n  padding-left: 0;\n"]);return J=function(){return e},e}var $=V.a.ul({visible:{opacity:1,originY:0,scaleY:1},hidden:{opacity:0,scaleY:0}}),X=Object(K.a)($)(J()),Z=K.a.li(Q()),ee=Object(T.a)((function(e){return Object(F.a)({demo:{backgroundColor:e.palette.background.paper},room_name:{textTransform:"none"}})})),te=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],o=t[1],c=ee(),l=Object(n.useState)(""),i=Object(u.a)(l,2),s=i[0],g=i[1],f=Object(n.useState)(""),E=Object(u.a)(f,2),b=E[0],h=E[1],v=Object(n.useState)({flag:!1,id:0}),O=Object(u.a)(v,2),y=O[0],x=O[1],S=Object(n.useState)(0),_=Object(u.a)(S,2),k=_[0],N=_[1],T=Object(n.useContext)(m),F=Object(n.useContext)(d),W=Object(n.useContext)(p),I=Object(n.useState)(null),K=Object(u.a)(I,2),V=K[0],Q=K[1],J=Boolean(V);Object(n.useEffect)((function(){var e;j.a.get("".concat("http://52.197.208.224","/rooms"),{params:{user_id:null===(e=T.userstate)||void 0===e?void 0:e.id}}).then((function(e){o(e.data),console.log(a)})).catch((function(e){console.log(e)}))}),[]),Object(n.useEffect)((function(){var e;j.a.get("".concat("http://52.197.208.224","rooms"),{params:{user_id:null===(e=T.userstate)||void 0===e?void 0:e.id}}).then((function(e){o(e.data),console.log(e.data)})).catch((function(e){console.log(e)}))}),[F.room_id]),Object(n.useEffect)((function(){var e;F.setChange_flag(!1),j.a.get("".concat("http://52.197.208.224","/rooms"),{params:{user_id:null===(e=T.userstate)||void 0===e?void 0:e.id}}).then((function(e){o(e.data),console.log(e.data)})).catch((function(e){console.log(e)}))}),[F.change_flag]);var $=function(e){W.setType("Chat"),F.setRoom_id(e)},te=function(e){y.flag?x({flag:!1,id:0}):x({flag:!0,id:e})},ae=function(){Q(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{fullWidth:!0,label:"\u30eb\u30fc\u30e0\u4f5c\u6210",onChange:function(e){return g(e.target.value)},helperText:b,required:!0,inputProps:{maxLength:20},onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),function(e){var t;(h(""),s)&&j.a.post("".concat("http://52.197.208.224","/rooms"),{room:{name:s,user_id:null===(t=T.userstate)||void 0===t?void 0:t.id}},{withCredentials:!0}).then((function(e){var t;"created"===e.data.status?j.a.get("".concat("http://52.197.208.224","/rooms"),{params:{user_id:null===(t=T.userstate)||void 0===t?void 0:t.id}}).then((function(e){console.log(e),o(e.data)})).catch((function(e){console.log(e)})):(console.log(e.data.errors),h(e.data.errors))})).catch((function(e){console.log("message error",e)}));e.preventDefault()}(e))}}),r.a.createElement("div",{className:c.demo},r.a.createElement("div",{className:"Rooms"},r.a.createElement(U.a,null,a.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{key:e.id},r.a.createElement(C.a,{smDown:!0},r.a.createElement(D.a,null,r.a.createElement(B.a,null,r.a.createElement(w.a,null)))),r.a.createElement(L.a,{primary:r.a.createElement(P.a,{onClick:function(){return $(e.id)},className:c.room_name},e.name)}),r.a.createElement(C.a,{smDown:!0},r.a.createElement(Y.a,null,r.a.createElement(P.a,{key:e.id,onClick:function(){return te(e.id)}},r.a.createElement(q.a,null)))),r.a.createElement(C.a,{mdUp:!0},r.a.createElement(G.a,{onClick:function(t){!function(e){Q(e.currentTarget)}(t),N(e.id)}},r.a.createElement(M.a,null)),r.a.createElement(H.a,{id:"long-menu",anchorEl:V,keepMounted:!0,open:J,onClose:ae},r.a.createElement(z.a,{onClick:ae},r.a.createElement(G.a,{key:e.id,onClick:function(){return te(k)}},r.a.createElement(q.a,null)))))),r.a.createElement(r.a.Fragment,null,r.a.createElement(X,{pose:y.flag?"visible":"hidden"},y.flag&&y.id===e.id?r.a.createElement(r.a.Fragment,null,e.users.map((function(e){return r.a.createElement(Z,null,e.name)}))):r.a.createElement(r.a.Fragment,null))))}))))))},ae=Object(T.a)((function(e){return Object(F.a)({demo:{backgroundColor:e.palette.background.paper},room_name:{textTransform:"none"}})})),ne=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],o=t[1],c=r.a.useState(!1),l=Object(u.a)(c,2),i=l[0],s=(l[1],Object(n.useState)("")),f=Object(u.a)(s,2),E=f[0],b=(f[1],Object(n.useState)("")),h=Object(u.a)(b,2),v=h[0],O=h[1],y=Object(n.useState)(null),x=Object(u.a)(y,2),S=x[0],_=x[1],k=Boolean(S),N=Object(n.useContext)(p),T=Object(n.useContext)(g),F=Object(n.useContext)(m),W=Object(n.useContext)(d),q=ae();Object(n.useEffect)((function(){j.a.get("".concat("http://52.197.208.224","/users")).then((function(e){o(e.data),console.log(a)})).catch((function(e){console.log(e)}))}),[]);var I=function(e){N.setType("UserPage"),T.setUser_id(e)},K=function(e,t){var a;j.a.post("".concat("http://52.197.208.224","/toakcreate"),{room:{name:t,user_id:null===(a=F.userstate)||void 0===a?void 0:a.id,opponent_id:e}},{withCredentials:!0}).then((function(e){N.setType("Chat"),W.setRoom_id(e.data.room.id)})).catch((function(e){console.log("message error",e)}))},V=function(){_(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{fullWidth:!0,label:"\u540d\u524d\u691c\u7d22",onChange:function(e){return O(e.target.value)},helperText:E,required:!0,inputProps:{maxLength:20},onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),j.a.get("".concat("http://52.197.208.224","/users"),{params:{search:v}}).then((function(e){o(e.data),console.log(a)})).catch((function(e){console.log(e)})))}}),r.a.createElement("div",{className:q.demo},r.a.createElement("div",{className:"Rooms"},r.a.createElement(U.a,{dense:i},a.map((function(e){var t;return(null===(t=F.userstate)||void 0===t?void 0:t.id)!==e.id&&r.a.createElement(A.a,{key:e.id},r.a.createElement(C.a,{smDown:!0},r.a.createElement(D.a,null,r.a.createElement(B.a,{src:e.image?e.image:""}))),r.a.createElement(L.a,{primary:r.a.createElement(P.a,{className:q.room_name,onClick:function(){return I(e.id)}},e.name)}),r.a.createElement(C.a,{smDown:!0},r.a.createElement(Y.a,null,r.a.createElement(P.a,{onClick:function(){return K(e.id,e.name)}},r.a.createElement(w.a,null)))),r.a.createElement(C.a,{mdUp:!0},r.a.createElement(G.a,{onClick:function(e){!function(e){_(e.currentTarget)}(e)}},r.a.createElement(M.a,null)),r.a.createElement(H.a,{anchorEl:S,keepMounted:!0,open:k,onClose:V},r.a.createElement(z.a,{onClick:V},r.a.createElement(G.a,{onClick:function(){return K(e.id,e.name)}},r.a.createElement(w.a,null))))))}))))))},re=Object(T.a)((function(e){return Object(F.a)({demo:{backgroundColor:e.palette.background.paper},room_name:{textTransform:"none"}})})),oe=function(){var e=re(),t=r.a.useState(!1),a=Object(u.a)(t,2),o=a[0],c=(a[1],Object(n.useState)("")),l=Object(u.a)(c,2),i=(l[0],l[1]),s=Object(n.useState)(""),m=Object(u.a)(s,2),d=m[0],g=m[1],E=Object(n.useState)([]),b=Object(u.a)(E,2),h=b[0],v=b[1],j=Object(n.useContext)(p),O=Object(n.useContext)(f),C=[{id:1,name:"Qiita"},{id:2,name:"News"},{id:3,name:"Weather"}];return Object(n.useEffect)((function(){v(C)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{fullWidth:!0,label:"Bot\u691c\u7d22",onChange:function(e){return i(e.target.value)},helperText:d,required:!0,inputProps:{maxLength:20},onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),function(e){g(""),e.preventDefault()}(e))}}),r.a.createElement("div",{className:e.demo},r.a.createElement("div",{className:"Rooms"},r.a.createElement(U.a,{dense:o},h.map((function(t){return r.a.createElement(A.a,{key:t.id},r.a.createElement(D.a,null,r.a.createElement(B.a,null,r.a.createElement(w.a,null))),r.a.createElement(L.a,{primary:r.a.createElement(P.a,{onClick:function(){return e=t.id,j.setType("Api"),void O.setBot_id(e);var e},className:e.room_name},t.name)}))}))))))},ce=a(112),le=a.n(ce),ie=function(){var e=Object(n.useState)("rooms"),t=Object(u.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(null),l=Object(u.a)(c,2),i=l[0],s=l[1],m=Boolean(i),d=function(e,t){o(t)},p=function(){s(null)};return r.a.createElement(r.a.Fragment,null,"rooms"===a&&r.a.createElement(te,null),"bots"===a&&r.a.createElement(oe,null),"users"===a&&r.a.createElement(ne,null),r.a.createElement(C.a,{xsDown:!0},r.a.createElement(y.a,{value:a,onChange:d},r.a.createElement(x.a,{label:"Rooms",value:"rooms",icon:r.a.createElement(w.a,null)}),r.a.createElement(x.a,{label:"Bot",value:"bots",icon:r.a.createElement(w.a,null)}),r.a.createElement(x.a,{label:"Users",value:"users",icon:r.a.createElement(k.a,null)}))),r.a.createElement(C.a,{smUp:!0},r.a.createElement(G.a,{onClick:function(e){!function(e){s(e.currentTarget)}(e)}},r.a.createElement(le.a,null)),r.a.createElement(H.a,{id:"long-menu",anchorEl:i,keepMounted:!0,open:m,onClose:p},r.a.createElement(z.a,{onClick:p},r.a.createElement(G.a,{onClick:function(e){return d(0,"rooms")}},r.a.createElement(w.a,null)),r.a.createElement(G.a,{onClick:function(e){return d(0,"bots")}},r.a.createElement(w.a,null)),r.a.createElement(G.a,{onClick:function(e){return d(0,"users")}},r.a.createElement(k.a,null))))))},se=a(210),ue=a(57),me=(a(157),Object(T.a)((function(e){return{root:{backgroundColor:e.palette.background.paper},inline:{display:"inline"}}}))),de=function(e){var t=e.message,a=e.user,o=me(),c=Object(n.useContext)(m);return r.a.createElement(r.a.Fragment,null,function(e,t,a,n){var o;return(null===(o=e.userstate)||void 0===o?void 0:o.id)===n.id?r.a.createElement(U.a,{className:t.root},r.a.createElement(A.a,{alignItems:"flex-start"},r.a.createElement(L.a,{className:"align",primary:r.a.createElement("h1",{className:"name"},n.name),secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{component:"span",variant:"body2",className:t.inline,color:"textPrimary"},a))}),r.a.createElement(D.a,null,r.a.createElement(B.a,{alt:"ME",src:n.image?n.image:""}))),r.a.createElement(se.a,{variant:"middle"})):r.a.createElement(U.a,{className:t.root},r.a.createElement(A.a,{alignItems:"flex-start"},r.a.createElement(D.a,null,r.a.createElement(B.a,{alt:"Martian",src:n.image?n.image:""})),r.a.createElement(L.a,{primary:r.a.createElement("h1",{className:"name"},n.name),secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{component:"span",variant:"body2",className:t.inline,color:"textPrimary"},r.a.createElement("p",null,a)))})),r.a.createElement(se.a,{variant:"middle"}))}(c,o,t,a))},pe=function(e){var t=e.messageData,a=void 0===t?[]:t;return r.a.createElement(r.a.Fragment,null,a.map((function(e){return r.a.createElement(de,{user:e.user,message:e.content})})))},ge=a(214),fe=a(221),Ee=a(212),be=a(213),he=a(223),ve=a(113),je=a.n(ve),Oe=(a(158),function(e){var t=e.User_ids,a=e.getUsers,o=Object(n.useState)([]),c=Object(u.a)(o,2),l=c[0],i=c[1],s=Object(n.useState)(""),p=Object(u.a)(s,2),g=p[0],f=p[1],E=Object(n.useContext)(d),b=Object(n.useContext)(m);Object(n.useEffect)((function(){j.a.get("".concat("http://52.197.208.224","/users")).then((function(e){i(e.data),console.log(l)})).catch((function(e){console.log(e)}))}),[]);var h=[];return r.a.createElement(fe.a,{px:2},r.a.createElement(R.a,{variant:"standard",margin:"none",label:"\u691c\u7d22",onChange:function(e){return f(e.target.value)},onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),j.a.get("".concat("http://52.197.208.224","/users"),{params:{search:g}}).then((function(e){i(e.data),console.log(l)})).catch((function(e){console.log(e)})))}}),r.a.createElement("div",{className:"Users"},r.a.createElement(U.a,{style:{backgroundColor:"white"}},r.a.createElement(O.a,{container:!0},l.map((function(e){var a;return e.id===(null===(a=b.userstate)||void 0===a?void 0:a.id)||t.includes(e.id)?r.a.createElement(r.a.Fragment,null):r.a.createElement(O.a,{xs:12,md:3},r.a.createElement(U.a,null,r.a.createElement(A.a,{key:e.id},r.a.createElement(D.a,null,r.a.createElement(B.a,null,r.a.createElement(je.a,null))),r.a.createElement(Ee.a,null,r.a.createElement(be.a,{control:r.a.createElement(he.a,{color:"primary",onChange:function(){var t;t=e.id,h.push(t)}}),label:e.name})))))}))))),r.a.createElement(P.a,{color:"primary",variant:"contained",onClick:function(){j.a.post("".concat("http://52.197.208.224","/userbelongsrooms"),{belong:{user_id:h,room_id:E.room_id}},{withCredentials:!0}).then((function(e){"created"===e.data.status&&(a(),E.setChange_flag(!0))}))}},"\u62db\u5f85"))}),Ce=(a(80),Object(T.a)((function(e){return Object(F.a)({root:{flexGrow:1},button:{margin:e.spacing(1),marginTop:"10px"}})}))),ye=function(e){var t=e.cableApp,a=e.roomsGet,o=Object(n.useContext)(m),c=Object(n.useState)(""),l=Object(u.a)(c,2),i=l[0],s=l[1],p=Object(n.useState)([]),g=Object(u.a)(p,2),f=g[0],E=g[1],b=Object(n.useState)(""),h=Object(u.a)(b,2),v=h[0],y=h[1],x=Object(n.useState)([]),S=Object(u.a)(x,2),w=S[0],_=S[1],k=Object(n.useState)(!1),N=Object(u.a)(k,2),T=N[0],F=N[1],U=Object(n.useContext)(d),A=Object(n.useState)(""),D=Object(u.a)(A,2),B=D[0],L=D[1],W=Ce(),q=Object(n.useState)(null),I=Object(u.a)(q,2),K=I[0],V=I[1],Y=Boolean(K),Q=function(e){_(e)},J=function(){j.a.get("".concat("http://52.197.208.224","/getuser_ids"),{params:{room_id:U.room_id}}).then((function(e){Q(e.data)})).catch((function(e){console.log(e)}))},$=function(){t.subscriptions.create({channel:"MessagesChannel",room_id:U.room_id},{received:function(e){var t=document.getElementById("scroll-area");!function(e){E(e)}(e),t&&(t.scrollTop=t.scrollHeight),console.log(f)}})};Object(n.useEffect)((function(){$()}),[U.room_id]),Object(n.useEffect)((function(){j.a.get("".concat("http://52.197.208.224","/getuser_ids"),{params:{room_id:U.room_id}}).then((function(e){Q(e.data)})).catch((function(e){console.log(e)}))}),[U.room_id]),Object(n.useEffect)((function(){j.a.get("".concat("http://52.197.208.224","/rooms/").concat(U.room_id),{params:{id:U.room_id}}).then((function(e){console.log(e),L(e.data.name),J()})).catch((function(e){console.log(e),L("")}))}),[U.room_id]),Object(n.useEffect)((function(){j.a.get("".concat("http://52.197.208.224","/messages"),{params:{room_id:U.room_id}}).then((function(e){console.log(e),E(e.data);var t=document.getElementById("scroll-area");t&&(t.scrollTop=t.scrollHeight)})).catch((function(e){console.log(e)}))}),[U.room_id]);var X=function(){var e,t;i?(y(""),j.a.post("".concat("http://52.197.208.224","/messages"),{message:{content:i,user_name:null===(e=o.userstate)||void 0===e?void 0:e.name,room_id:U.room_id,user_id:null===(t=o.userstate)||void 0===t?void 0:t.id}},{withCredentials:!0}).then((function(e){e.data.status})).catch((function(e){console.log("message error",e)}))):y("\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044")},Z=function(){F(!T)},ee=function(){var e;j.a.get("".concat("http://52.197.208.224","/getuser_ids"),{params:{room_id:U.room_id}}).then((function(e){Q(e.data)})),j.a.delete("".concat("http://52.197.208.224","/userbelongsrooms/").concat(U.room_id),{params:{user_id:null===(e=o.userstate)||void 0===e?void 0:e.id,room_id:U.room_id}}).then((function(e){1===w.length&&j.a.delete("".concat("http://52.197.208.224","/rooms/").concat(U.room_id),{params:{id:U.room_id}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),"deleted"===e.data.status?(a(),U.setRoom_id(null)):console.log("leave error")}))},te=function(){window.confirm("\u524a\u9664\u3057\u307e\u3059\u304b\uff1f")&&j.a.delete("".concat("http://52.197.208.224","/rooms/").concat(U.room_id),{params:{id:U.room_id}}).then((function(e){console.log(e),"deleted"===e.data.status&&(a(),U.setRoom_id(null))})).catch((function(e){console.log(e)}))},ae=function(){V(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{container:!0},r.a.createElement(O.a,{item:!0,xs:3},r.a.createElement("h1",null,B)),r.a.createElement(O.a,{item:!0,xs:9,container:!0,justify:"flex-end"},r.a.createElement(C.a,{smDown:!0},r.a.createElement(P.a,{variant:"contained",className:W.button,color:"primary",onClick:Z},"\u62db\u5f85"),r.a.createElement(P.a,{variant:"contained",className:W.button,color:"secondary",onClick:ee},"\u9000\u5ba4"),r.a.createElement(P.a,{variant:"contained",className:W.button,color:"secondary",onClick:te},"\u30eb\u30fc\u30e0\u524a\u9664")),r.a.createElement(C.a,{mdUp:!0},r.a.createElement(G.a,{onClick:function(e){!function(e){V(e.currentTarget)}(e)}},r.a.createElement(M.a,null)),r.a.createElement(H.a,{id:"long-menu",anchorEl:K,keepMounted:!0,open:Y,onClose:ae,PaperProps:{style:{}}},r.a.createElement(z.a,{onClick:ae},r.a.createElement(P.a,{variant:"contained",className:W.button,color:"primary",onClick:Z},"\u62db\u5f85"),r.a.createElement(P.a,{variant:"contained",className:W.button,color:"secondary",onClick:ee},"\u9000\u5ba4"),r.a.createElement(P.a,{variant:"contained",className:W.button,color:"secondary",onClick:te},"\u30eb\u30fc\u30e0\u524a\u9664")))))),r.a.createElement("div",{className:"app-main",id:"scroll-area"},T?r.a.createElement(Oe,{User_ids:w,getUsers:J}):r.a.createElement(pe,{messageData:f})),r.a.createElement(O.a,{container:!0},r.a.createElement(O.a,{item:!0,xs:10},r.a.createElement(R.a,{onChange:function(e){return s(e.target.value)},label:"\u30e1\u30c3\u30bb\u30fc\u30b8",fullWidth:!0,helperText:v,required:!0,inputProps:{maxLength:250},onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),X())}})),r.a.createElement(O.a,{item:!0,xs:1},r.a.createElement(P.a,{variant:"contained",className:W.button,onClick:X,color:"primary",endIcon:r.a.createElement(ge.a,null,"send")},"send"))))},xe=(a(159),Object(T.a)({root:{marginTop:20,backgroundColor:"white",minHeight:500},name:{margin:20,fontSize:50},prof:{margin:20,fontSize:25}})),Se=function(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],o=t[1],c=Object(n.useContext)(g),l=xe();return Object(n.useEffect)((function(){j.a.get("".concat("http://52.197.208.224","/users/:id"),{params:{user_id:c.user_id}}).then((function(e){console.log(e),o(e.data)})).catch((function(e){console.log(e)}))}),[c.user_id]),r.a.createElement("div",{className:"usershow"},r.a.createElement(U.a,null,r.a.createElement(A.a,null,a&&r.a.createElement(D.a,null,r.a.createElement(B.a,{src:a.image?a.image:""})),r.a.createElement(L.a,{primary:r.a.createElement("h1",null,null===a||void 0===a?void 0:a.name)}))),r.a.createElement("p",{className:l.prof},null===a||void 0===a?void 0:a.profile))},we=Object(T.a)((function(e){return Object(F.a)({root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},button:{margin:e.spacing(1)},inline:{display:"inline"}})})),_e=function(){var e=Object(n.useContext)(m),t=Object(n.useState)(""),a=Object(u.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(""),i=Object(u.a)(l,2),s=i[0],d=i[1],p=Object(n.useState)([]),g=Object(u.a)(p,2),f=g[0],E=g[1],b=Object(n.useState)(""),h=Object(u.a)(b,2),v=h[0],O=h[1],C=Object(n.useState)(!1),y=Object(u.a)(C,2),x=y[0],S=y[1],w=we(),_=function(){o?(O(""),d(o),j.a.get("https://qiita.com/api/v2/items",{params:{page:"1",per_page:"20",query:o}}).then((function(e){console.log(e.data),S(!0),E(e.data)})).catch((function(e){console.log("message error",e)}))):O("\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Qiita\u304f\u3093"),r.a.createElement("div",{className:"app-main",id:"scroll-area"},x&&e.userstate&&r.a.createElement(de,{message:s,user:e.userstate}),f.map((function(e){return r.a.createElement(U.a,{className:w.root,key:e.title},r.a.createElement(A.a,{alignItems:"flex-start"},r.a.createElement(D.a,null,r.a.createElement(B.a,{alt:"Martian",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcT5lquvS_JqssPqAlVj1dQhMuzLgtQRUSrEYg&usqp=CAU"})),r.a.createElement(L.a,{primary:r.a.createElement("h4",null,e.title),secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{component:"span",variant:"body2",className:w.inline,color:"textPrimary"},r.a.createElement("a",{href:e.url},e.url)))})),r.a.createElement(se.a,{variant:"middle"}))}))),r.a.createElement(R.a,{onChange:function(e){return c(e.target.value)},label:"\u30e1\u30c3\u30bb\u30fc\u30b8",style:{width:"80%"},helperText:v,required:!0,onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),_())}}),r.a.createElement(P.a,{variant:"contained",className:w.button,onClick:_,color:"primary",endIcon:r.a.createElement(ge.a,null,"send")},"send"))},ke=function(){var e=Object(n.useContext)(f);return r.a.createElement(r.a.Fragment,null,1===e.bot_id&&r.a.createElement(_e,null))},Ne=function(e){var t=e.cableApp,a=e.roomsGet,o=Object(n.useContext)(p);return r.a.createElement(r.a.Fragment,null,"Chat"===o.type&&r.a.createElement(ye,{cableApp:t,roomsGet:a}),"Api"===o.type&&r.a.createElement(ke,null),"UserPage"===o.type&&r.a.createElement(Se,null))},Te=(a(160),function(e){var t=e.cableApp,a=Object(n.useContext)(d),o=Object(n.useState)([]),c=Object(u.a)(o,2),l=c[0],i=c[1],s=Object(n.useContext)(m);return r.a.createElement("div",{className:"main"},r.a.createElement(O.a,{container:!0,spacing:2},r.a.createElement(O.a,{item:!0,md:3,xs:4},r.a.createElement(ie,null)),r.a.createElement(O.a,{item:!0,md:9,xs:8},r.a.createElement(Ne,{cableApp:t,roomsGet:function(){var e;j.a.get("".concat("http://52.197.208.224","/rooms"),{params:{user_id:null===(e=s.userstate)||void 0===e?void 0:e.id}}).then((function(e){i(e.data),a.setRoom_id(0),console.log(l)})).catch((function(e){console.log(e)}))}}))))}),Fe=a(216),Ue=a(217),Ae=a(72),De=a.n(Ae),Be=a(215),Le=a(73),Pe=a(50),Re=(a(101),Object(T.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})));function We(e){var t=Object(Le.a)(),a=t.register,o=t.handleSubmit,c=t.errors,l=Object(n.useState)(""),i=Object(u.a)(l,2),s=i[0],d=i[1],p=Object(n.useState)(""),g=Object(u.a)(p,2),f=g[0],E=g[1],b=Re(),v=Object(h.h)(),C=Object(n.useContext)(m);return r.a.createElement(Be.a,{component:"main",maxWidth:"xs",style:{backgroundColor:"white"}},r.a.createElement(Fe.a,null),r.a.createElement("div",{className:b.paper},r.a.createElement(B.a,{className:b.avatar},r.a.createElement(De.a,null)),r.a.createElement(ue.a,{component:"h1",variant:"h5"},"\u30ed\u30b0\u30a4\u30f3"),r.a.createElement("form",{className:b.form,noValidate:!0,onSubmit:o((function(){j.a.post("".concat("http://52.197.208.224","/login"),{user:{email:s,password:f}},{withCredentials:!0}).then((function(e){var t;e.data.logged_in?(t=e.data,C.setUserState(t.user),C.setLoginStatus(!0),v("/")):(Object(Pe.b)(e.data.errors[0]),Object(Pe.b)(e.data.errors[1]),console.log(e.data.errors))})).catch((function(e){console.log("registraion error",e)}))}))},r.a.createElement(R.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,inputRef:a({required:!0,pattern:/^\S+@\S+$/i}),error:Boolean(c.email),helperText:c.email&&"\u6b63\u3057\u3044\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",onChange:function(e){return d(e.target.value)}}),r.a.createElement(R.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",inputRef:a({required:!0}),error:Boolean(c.password),helperText:c.password&&"\u6b63\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",onChange:function(e){return E(e.target.value)}}),r.a.createElement(P.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:b.submit},"\u30ed\u30b0\u30a4\u30f3"),r.a.createElement(O.a,{container:!0},r.a.createElement(O.a,{item:!0,xs:!0},r.a.createElement(Ue.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(O.a,{item:!0},r.a.createElement(Ue.a,{href:"sign-up",variant:"body2"},"Don't have an account? Sign Up"))))),r.a.createElement(Pe.a,null))}var qe=Object(T.a)((function(e){return Object(F.a)({root:{marginTop:20,backgroundColor:"white",minHeight:500},name:{paddingTop:20,margin:20,fontSize:50},prof:{margin:20,fontSize:25},large:{width:e.spacing(7),height:e.spacing(7)}})})),Ie=function(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],o=t[1],c=Object(n.useContext)(m),l=qe(),i=Object(h.h)();Object(n.useEffect)((function(){var e;j.a.get("".concat("http://52.197.208.224","/users/:id"),{params:{user_id:null===(e=c.userstate)||void 0===e?void 0:e.id}}).then((function(e){console.log(e),o(e.data)})).catch((function(e){console.log(e)}))}),[]);return r.a.createElement(Be.a,{className:l.root},r.a.createElement(U.a,null,r.a.createElement(A.a,null,a&&r.a.createElement(D.a,null,r.a.createElement(B.a,{src:a.image?a.image:"",className:l.large})),r.a.createElement(L.a,{primary:r.a.createElement("h1",{className:l.name},null===a||void 0===a?void 0:a.name)}))),r.a.createElement(P.a,{variant:"contained",color:"primary",onClick:function(){i("/changeprof")}},"\u7de8\u96c6"),r.a.createElement("p",{className:l.prof},null===a||void 0===a?void 0:a.profile))},Me=Object(T.a)((function(e){return{root:{marginTop:20,backgroundColor:"white"},submit:{margin:e.spacing(3,0,2)}}})),Ge=function(){var e,t,a=Object(n.useContext)(m),o=Me(),c=Object(n.useState)(null===(e=a.userstate)||void 0===e?void 0:e.name),l=Object(u.a)(c,2),i=l[0],s=l[1],d=Object(n.useState)(null===(t=a.userstate)||void 0===t?void 0:t.profile),p=Object(u.a)(d,2),g=p[0],f=p[1],E=Object(n.useState)(!0),b=Object(u.a)(E,2),v=b[0],O=b[1],C=Object(n.useState)(""),y=Object(u.a)(C,2),x=y[0],S=y[1],w=Object(h.h)();Object(n.useEffect)((function(){var e;O(!0),j.a.get("".concat("http://52.197.208.224","/users/:id"),{params:{user_id:null===(e=a.userstate)||void 0===e?void 0:e.id}}).then((function(e){console.log(e),a.setUserState(e.data),s(e.data.name),f(e.data.profile),O(!1)})).catch((function(e){console.log(e)}))}),[]);return r.a.createElement(r.a.Fragment,null,v?r.a.createElement(r.a.Fragment,null):r.a.createElement(Be.a,{className:o.root},r.a.createElement(fe.a,{p:2},r.a.createElement("h1",null,"\u7de8\u96c6"),r.a.createElement("form",null,r.a.createElement(R.a,{variant:"outlined",margin:"normal",label:"\u540d\u524d",fullWidth:!0,defaultValue:i,autoFocus:!0,name:"name",onChange:function(e){return s(e.target.value)}}),r.a.createElement("label",null,"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u753b\u50cf"),x&&r.a.createElement("img",{src:"string"===typeof x?x:""}),r.a.createElement("canvas",{id:"canvas",style:{display:"none"},width:"64",height:"64"}),r.a.createElement(P.a,{component:"label",variant:"contained",color:"primary"},"Upload File",r.a.createElement("input",{type:"file",className:"inputFileBtnHide",style:{display:"none"},onChange:function(e){return function(e){if(document.getElementById("canvas")){var t=document.getElementById("canvas");if(t){var a=t.getContext("2d"),n=new Image;n.onload=function(){var e=n.width,r=n.height,o=Math.min(250/e,250/r),c=e*o,l=r*o;t.width=c,t.height=l,a.drawImage(n,0,0,c,l);var i=t.toDataURL("image/jpeg",.5);S(i)},n.src=URL.createObjectURL(e.target.files[0])}}}(e)}})),r.a.createElement(R.a,{variant:"outlined",margin:"normal",label:"Profile",multiline:!0,rows:4,fullWidth:!0,defaultValue:g,name:"prof",onChange:function(e){return f(e.target.value)}}),r.a.createElement(P.a,{type:"submit",variant:"contained",color:"primary",className:o.submit,onClick:function(){var e,t,n;j.a.patch("".concat("http://52.197.208.224","/users/").concat(null===(e=a.userstate)||void 0===e?void 0:e.id),{user:{user_id:null===(t=a.userstate)||void 0===t?void 0:t.id,name:i,profile:g,image:x}}).then((function(e){var t;"created"===e.data.status?w("/userpage/".concat(null===(t=a.userstate)||void 0===t?void 0:t.id)):console.log(e.data.errors)})).catch((function(e){console.log(e)})),j.a.get("".concat("http://52.197.208.224","/logged_in"),{withCredentials:!0}).then((function(e){a.setUserState(e.data.user)})).catch((function(e){console.log(e)})),w("/userpage/".concat(null===(n=a.userstate)||void 0===n?void 0:n.id))}},"\u9001\u4fe1")))))},He=Object(T.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function ze(e){var t=Object(Le.a)(),a=t.register,o=t.handleSubmit,c=t.errors,l=Object(n.useContext)(m),i=Object(n.useState)(""),s=Object(u.a)(i,2),d=s[0],p=s[1],g=Object(n.useState)(""),f=Object(u.a)(g,2),E=f[0],b=f[1],v=Object(n.useState)(""),C=Object(u.a)(v,2),y=C[0],x=C[1],S=Object(n.useState)(""),w=Object(u.a)(S,2),_=w[0],k=w[1],N=He(),T=Object(h.h)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Be.a,{component:"main",maxWidth:"xs",style:{backgroundColor:"white"}},r.a.createElement(Fe.a,null),r.a.createElement("div",{className:N.paper},r.a.createElement(B.a,{className:N.avatar},r.a.createElement(De.a,null)),r.a.createElement(ue.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:N.form,noValidate:!0,onSubmit:o((function(){j.a.post("".concat("http://52.197.208.224","/signup"),{user:{name:d,email:E,password:y,password_confirmation:_}},{withCredentials:!0}).then((function(e){var t;"created"===e.data.status?(t=e.data,l.setUserState(t.user),l.setLoginStatus(!0),T("/")):(Object(Pe.b)(e.data.errors),console.log(e.data))})).catch((function(e){console.log("registraion error",e)}))}))},r.a.createElement(O.a,{container:!0,spacing:2},r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(R.a,{autoComplete:"name",name:"Name",variant:"outlined",fullWidth:!0,id:"Name",label:"Name",inputRef:a({required:!0}),error:Boolean(c.name),helperText:c.name&&"\u540d\u524d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",onChange:function(e){return p(e.target.value)},autoFocus:!0})),r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(R.a,{variant:"outlined",fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",inputRef:a({required:!0,pattern:/^\S+@\S+$/i}),error:Boolean(c.email),helperText:c.email&&"\u6b63\u3057\u3044\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",onChange:function(e){return b(e.target.value)}})),r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(R.a,{variant:"outlined",fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",inputRef:a({required:!0}),error:Boolean(c.email),helperText:c.password&&"\u6b63\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",onChange:function(e){return x(e.target.value)},autoComplete:"current-password"})),r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(R.a,{variant:"outlined",fullWidth:!0,name:"passwordconfirmation",label:"PasswordConfirmation",type:"password",id:"password",inputRef:a({required:!0}),error:Boolean(c.passwordconfirmation),helperText:c.passwordconfirmation&&"\u6b63\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",onChange:function(e){return k(e.target.value)},autoComplete:"current-password"}))),r.a.createElement(P.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:N.submit},"Sign Up"),r.a.createElement(O.a,{container:!0,justify:"flex-end"},r.a.createElement(O.a,{item:!0},r.a.createElement(Ue.a,{href:"Home",variant:"body2"},"Already have an account? Sign in"))))),r.a.createElement(Pe.a,null)))}var Ke=a(218),Ve=a(219),Ye=a(15),Qe=a.n(Ye),Je=a(24),$e=a(85),Xe=function(e){var t=e.Component,a=e.cableApp,o=e.redirectLink,c=Object($e.a)(e,["Component","cableApp","redirectLink"]),l=Object(n.useContext)(m);return!0===l.loginStatus&&l.userstate?r.a.createElement(t,Object.assign({cableApp:a},c)):r.a.createElement(h.a,{to:o})},Ze=function(e){var t=e.component,a=e.redirectLink,o=e.cableApp,c=e.path,l=(Object($e.a)(e,["component","redirectLink","cableApp","path"]),Object(n.useContext)(m)),i=Object(n.useState)(!0),s=Object(u.a)(i,2),d=s[0],p=s[1];return Object(n.useEffect)((function(){(function(){var e=Object(Je.a)(Qe.a.mark((function e(){var t;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.prev=1,e.next=4,j.a.get("".concat("http://52.197.208.224","/logged_in"),{withCredentials:!0});case 4:(t=e.sent).data.logged_in&&!l.loginStatus?(l.setLoginStatus(!0),l.setUserState(t.data.user),p(!1)):!t.data.logged_in&&l.loginStatus?(l.setLoginStatus(!1),l.setUserState(null),p(!1)):p(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("\u30ed\u30b0\u30a4\u30f3\u30a8\u30e9\u30fc",e.t0),p(!1);case 12:case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement(r.a.Fragment,null,d?r.a.createElement(r.a.Fragment,null):r.a.createElement(h.b,{path:c,element:r.a.createElement(Xe,{cableApp:o,redirectLink:a,Component:t})}))},et=(a(162),Object(T.a)((function(e){return{list:{width:250},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},appButton:{textTransform:"none"}}}))),tt=function(e){var t=e.cableApp,a=et(),o=Object(n.useContext)(m),c=Object(h.h)(),i=function(){j.a.delete("".concat("http://52.197.208.224","/logout"),{withCredentials:!0}).then((function(e){o.setLoginStatus(!1),o.setUserState(null),c("/login")})).catch((function(e){return console.log("\u30ed\u30b0\u30a2\u30a6\u30c8\u30a8\u30e9\u30fc",e)}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{htmlAttributes:{lang:"ja"}},r.a.createElement("title",null,"Home")),r.a.createElement("div",{className:a.root},r.a.createElement(Ke.a,{position:"static"},r.a.createElement(Ve.a,null,r.a.createElement(ue.a,{variant:"h6",className:a.title},r.a.createElement(l.b,{to:"/",style:{color:"white",textDecoration:"none"}},"YUUTA")),function(){try{if(o.userstate)return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{className:a.appButton},r.a.createElement(l.b,{to:"/mypage",style:{color:"white",textDecoration:"none"}},o.userstate.name)),r.a.createElement(P.a,{color:"inherit",onClick:i},"\u30ed\u30b0\u30a2\u30a6\u30c8"))}catch(e){return r.a.createElement(r.a.Fragment,null)}}()))),r.a.createElement(h.d,null,r.a.createElement(Ze,{path:"/",component:Te,cableApp:t,redirectLink:"/login"}),r.a.createElement(Ze,{path:"/mypage",component:Ie,redirectLink:"/login"}),r.a.createElement(h.b,{path:"/sign-up",element:o&&o.userstate?r.a.createElement(Te,{cableApp:t}):r.a.createElement(ze,null)}),r.a.createElement(h.b,{path:"/login",element:o&&o.loginStatus?r.a.createElement(Te,{cableApp:t}):r.a.createElement(We,null)}),r.a.createElement(Ze,{path:"/changeprof",component:Ge,redirectLink:"/login"}),r.a.createElement(Ze,{path:"/home",component:Te,cableApp:t,redirectLink:"/login"}),r.a.createElement(h.b,{path:"*",element:r.a.createElement(h.a,{to:"/",replace:!0})})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(163);var at=s.a.createConsumer("ws://localhost:3001/cable");c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null,r.a.createElement(l.a,null,r.a.createElement(tt,{cableApp:at})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},80:function(e,t,a){}},[[130,1,2]]]);
//# sourceMappingURL=main.45035052.chunk.js.map